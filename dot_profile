set -o allexport

# if nothing matches the glob should expand to null
if [ "$0" = "bash" ] ; then
  shopt -s nullglob
elif [ "$0" = "zsh" ] ; then
  set -o nullglob
fi

for f in "$HOME/.config/environment.d"/*.conf ; do
  . "$f"
done

if [ "$0" = "bash" ] ; then
  shopt -u nullglob
elif [ "$0" = "zsh" ] ; then
  set +o nullglob
fi

set +o allexport

if command -v emacsclient >/dev/null ; then
  export VISUAL="emacsclient -c"
fi

# start emacs daemon if none found
export ALTERNATE_EDITOR=""

alias e="$EDITOR"
alias v="$VISUAL"
echo "$VISUAL" | grep -q "emacsclient" && alias vq="$VISUAL -n"

# For gpg agent forwarding. (Dir gets deleted on log out)
gpgconf --create-socketdir

# if not SSH connection
if [ -z "$SSH_CLIENT" ] ; then
  GPG_TTY=$(tty)
  export GPG_TTY
  gpgconf --launch gpg-agent
  SSH_AUTH_SOCK="$(gpgconf --list-dirs agent-ssh-socket)"
  export SSH_AUTH_SOCK
fi

# vim: set ft=sh ts=2

# Local Variables:
# mode: sh
# End:
